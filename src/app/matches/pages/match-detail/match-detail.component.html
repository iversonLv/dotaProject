<!-- match top overview section -->
<div *ngIf="isLoading">Loading</div>
<app-match-hero [data]="matchData" *ngIf="!isLoading"></app-match-hero>
<!-- teams page navigation -->
<app-sub-nav [links]="[
'overview',
'benchmarks',
'draft',
'performances',
'laning',
'combat',
'farm',
'items',
'graphs',
'casts',
'objectives',
'vision',
'actions',
'analysis',
'cosmetics',
'log',
'fantasy',
'chat',
'story'
]" [parentPage]="'matchesDetail'"></app-sub-nav>

<div class="wrapper">
  <div *ngIf="isLoading; else hasData">Loading</div>

  <ng-template #hasData>

    <!-- overview tab -->
    <div *ngIf="currentPage === 'overview'">
      <!-- radiant side -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Overview' : 'Radiant - Overview'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->

        <!-- overview table -->
        <app-table-match-detail-overview
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [data]="matchData?.players"
          [dataRange]="[0, 5]"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          [permanentBuffsLocal]="permanentBuffsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
        </app-table-match-detail-overview>

        <!-- band pick list -->
        <app-band-pick-list
          *ngIf="matchData?.picks_bans"
          [heroesLocal]="heroesLocal"
          [data]="extractBanPickListBaseOnTeam(matchData?.picks_bans, 0)">
        </app-band-pick-list>

      </div>
      <!-- team-box -->

      <!-- dire side -->
      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Overview' : 'Dire - Overview'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->

        <!-- overview table -->
        <app-table-match-detail-overview
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [data]="matchData?.players"
          [dataRange]="[5, 10]"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          [permanentBuffsLocal]="permanentBuffsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
        </app-table-match-detail-overview>

        <!-- band pick list -->
        <app-band-pick-list
          *ngIf="matchData?.picks_bans"
          [heroesLocal]="heroesLocal"
          [data]="extractBanPickListBaseOnTeam(matchData?.picks_bans, 1)">
        </app-band-pick-list>
        
      </div>
      <!-- team-box -->

      <!-- ability build -->
      <!-- radiant side -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Ability Build' : 'Radiant - Ability Build'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->

        <!-- ability build -->
        <app-table-match-detail-overview-ability-build
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [abilitiesByIdLocal]="abilitiesByIdLocal"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
          [data]="matchData?.players | slice: 0:5">
        </app-table-match-detail-overview-ability-build>
        
      </div>
      <!-- team-box -->

      <!-- dire side -->
      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Overview' : 'Dire - Overview'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->

        <!-- ability build -->
        <app-table-match-detail-overview-ability-build
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [abilitiesByIdLocal]="abilitiesByIdLocal"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
          [data]="matchData?.players | slice: 5:10"
          >
        </app-table-match-detail-overview-ability-build>
        
      </div>
      <!-- team-box -->
    </div>

    <!-- benchmarks tab -->
    <div *ngIf="currentPage === 'benchmarks'" class="single-match-benchmarks">
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Ability Build' : 'Radiant - Ability Build'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-benchmarks
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"></app-table-match-detail-benchmarks>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Benchmarks' : 'Dire - Benchmarks'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-benchmarks
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10">
        </app-table-match-detail-benchmarks>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="build-map-advantage">
        <!-- build map -->
        
        <!-- advantage-chart -->
      </div>

    </div>
  
    <!-- draft tab content -->
    <div class="single-match-draft" *ngIf="currentPage === 'draft'">
      <div *ngIf="!matchData?.picks_bans">The match does not have Draft timeming.</div>
      <app-draft-list
        *ngIf="matchData?.picks_bans"
        [data]="matchData?.picks_bans"
        [heroesLocal]="heroesLocal"
        [radiantTeam]="matchData?.radiant_team"
        [direTeam]="matchData?.dire_team">
      </app-draft-list>
    </div>

    <!-- performances tab content -->
    <div *ngIf="currentPage === 'performances'" class="single-match-performances">
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Performances' : 'Radiant - Performances'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-performances
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [heroesNameLocal]="heroesNameLocal"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
          [data]="matchData?.players | slice: 0:5">
        </app-table-match-detail-performances>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Performances' : 'Dire - Performances'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-performances
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [heroesNameLocal]="heroesNameLocal"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
          [data]="matchData?.players | slice: 5:10">
        </app-table-match-detail-performances>
        <!-- table -->
      </div>
      <!-- team-box -->
    </div>

    <!-- combat -->
    <div *ngIf="currentPage === 'combat'">
      <div class="kill-damage">
        <!-- kills table -->
        <div class="team-box">
          <app-nav-title [title]="'Kills and Damages '">
            <span class="killed-damage-txt">Killed</span><span class="killed-damage-txt">Damage</span><span class="killed-damage-by-txt">Killed by</span><span class="killed-damage-by-txt">Damage taken</span>
          </app-nav-title>
          <app-table-match-detail-combat-kills
            [heroesLocal]="heroesLocal"
            [data]="matchData?.players"
          >
          </app-table-match-detail-combat-kills>
        </div>

        <!-- damage table -->
        <!-- Now I merge kills and damage table togeter -->
        <!-- <div>
          <app-nav-title [title]="'Damage'"> </app-nav-title>
          <app-table-match-detail-combat-damage
            [heroesLocal]="heroesLocal"
            [data]="matchData?.players"
          >
          </app-table-match-detail-combat-damage>
        </div> -->

      </div>
      <!-- damage detail table -->

      <!-- radiant damage detail tabel -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Damage' : 'Radiant - Damage'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-combat-damage-detail
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"

          [heroesNameLocal]="heroesNameLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
        </app-table-match-detail-combat-damage-detail>
      </div>
      <!-- team-box -->
      
      <!-- dire damage detail tabel -->
      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Damage' : 'Dire - Damage'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-combat-damage-detail
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10"

          [heroesNameLocal]="heroesNameLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
        </app-table-match-detail-combat-damage-detail>
        <!-- table -->
      </div>
      <!-- team-box -->
    </div>

    <!-- farm -->
    <div *ngIf="currentPage === 'farm'">
      <!-- units kills -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Units Kills' : 'Radiant - Units Kills'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-unit-kills
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"
        >
        </app-table-match-detail-unit-kills>
      </div>
      <!-- team-box -->
      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Units Kills' : 'Dire - Units Kills'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-unit-kills
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10"
        >
      </app-table-match-detail-unit-kills>
        <!-- table -->
      </div>
      <!-- team-box -->

      <!-- last hits -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Last Hits' : 'Radiant - Last Hits'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-last-hits
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"
        >
        </app-table-match-detail-last-hits>
      </div>
      <!-- team-box -->
      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Last Hits' : 'Dire - Last Hits'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-last-hits
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10"
        >
      </app-table-match-detail-last-hits>
        <!-- table -->
      </div>
      <!-- team-box -->
    </div>

    <!-- casts -->
    <div *ngIf="currentPage === 'casts'">
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Casts' : 'Radiant - Casts'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-casts
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"
          
          [heroesNameLocal]="heroesNameLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
        </app-table-match-detail-casts>
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Casts' : 'Dire - Casts'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-casts
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10"
          
          [heroesNameLocal]="heroesNameLocal"
          [itemIdsLocal]="itemIdsLocal"
          [itemsLocal]="itemsLocal"
          (showItemModalFn)="showItemModalFn($event)"
          (hideItemModalFn)="showItemModal=false; currentMouseOverItem = null"
          [abilitiesTalentsLocal]="abilitiesTalentsLocal"
          (showAbilityModalFn)="showAbilityModalFn($event)"
          (hideAbilityModalFn)="showAbilityModal=false; currentMouseOverAbilityName = null"
        >
      </app-table-match-detail-casts>
        <!-- table -->
      </div>
      <!-- team-box -->
    </div>

    <!-- objectives -->
    <div *ngIf="currentPage === 'objectives'">
      <!-- objectives damage section -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Objectives Damage' : 'Radiant - Objectives Damage'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-objective-damage
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5">
        </app-table-match-detail-objective-damage>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Objectives Damage' : 'Dire - Objectives Damage'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-objective-damage
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10">
        </app-table-match-detail-objective-damage>
        <!-- table -->
      </div>
      <!-- team-box -->

      <!-- runes section -->
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Runes' : 'Radiant - Runes'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-runes
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5">
        </app-table-match-detail-runes>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Runes' : 'Dire - Runes'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-runes
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10">
        </app-table-match-detail-runes>
        <!-- table -->
      </div>
      <!-- team-box -->

    </div>

    <!-- actions -->
    <div *ngIf="currentPage === 'actions'" class="single-match-actions">
      <div class="team-box">
        <div class="team-row">
          <app-radient class="sides-icon"></app-radient>
          <app-nav-title [title]="matchData?.radiant_team ? matchData?.radiant_team?.name + ' - Actions' : 'Radiant - Actions'"> {{matchData.radiant_win ? 'WINNER' : ''}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-actions
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 0:5"></app-table-match-detail-actions>
        <!-- table -->
      </div>
      <!-- team-box -->

      <div class="team-box">
        <div class="team-row">
          <app-dire class="sides-icon"></app-dire>
          <app-nav-title [title]="matchData?.dire_team ? matchData?.dire_team?.name + ' - Actions' : 'Dire - Actions'"> {{matchData.radiant_win ? '' : 'WINNER'}}</app-nav-title>
        </div>
        <!-- team-row -->
        <app-table-match-detail-actions
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players | slice: 5:10">
        </app-table-match-detail-actions>
        <!-- table -->
      </div>
      <!-- team-box -->
    </div>

    <!-- Cosmetics -->
    <div *ngIf="currentPage === 'cosmetics'">
      <app-nav-title [title]="'Cosmetics'"></app-nav-title>
      <app-table-cosmetics
          [playerColorLocal]="playerColorLocal"
          [heroesLocal]="heroesLocal"
          [data]="matchData?.players"
      ></app-table-cosmetics>
    </div>
  </ng-template>
  
</div>

<app-ability-modal [abilitiesTalentsLocal]="abilitiesTalentsLocal" *ngIf="showAbilityModal" [item]='currentMouseOverAbilityName' [pageXY] = 'pageXY'></app-ability-modal>
<app-item-modal [itemsLocal]="itemsLocal" *ngIf="showItemModal" [item]='currentMouseOverItem' [pageXY] = 'pageXY' class="item-modal"></app-item-modal>